(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2724)}])},2724:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSG:function(){return x},default:function(){return p}});var t=n(5893),i=n(7294),a=n(8357),c=n(1649);function s(e){var r=e.query,n=e.handleQuery,i=e.placeholder;return(0,t.jsxs)("div",{className:"search-box",role:"search",children:[(0,t.jsx)(c.y5k,{"aria-hidden":"true"}),(0,t.jsx)("input",{className:"search-box__input",type:"search",value:r,onChange:n,placeholder:i})]})}var l=n(5934),o=n(9352);function d(e){var r=e.items,n=e.selectedItem,a=e.handleSelection,c=e.criterion,s=(0,i.useState)(!1),d=s[0],u=s[1],_=(0,i.useRef)(null),f=(0,i.useRef)(null),m=(0,i.useRef)(null),h=function(e){a(e.target.id),u(!1)},x=function(e){var r=e.target,n="BUTTON"===r.tagName,t="option"===r.getAttribute("role");if(n)switch(e.code){case"ArrowDown":case"ArrowUp":u(!0)}else if(t)switch(e.code){case"ArrowDown":if(!r.nextElementSibling)return;e.preventDefault(),r.nextElementSibling.focus();break;case"ArrowUp":if(!r.previousElementSibling)return;e.preventDefault(),r.previousElementSibling.focus();break;case"Enter":u(!1),a(r.id);break;case"Escape":var i;u(!1),null===(i=f.current)||void 0===i||i.focus()}},p=function(e){var r,n=e.target;n.closest(".filter__dropdown__icon")||(null===(r=_.current)||void 0===r?void 0:r.contains(n))||u(!1)};return(0,i.useEffect)((function(){var e;d&&(null===(e=m.current)||void 0===e||e.focus())}),[d,m]),(0,i.useEffect)((function(){return document.addEventListener("click",p),function(){document.removeEventListener("click",p)}}),[]),(0,t.jsxs)("div",{className:"filter",ref:_,children:[(0,t.jsxs)("button",{className:"filter__dropdown",id:"filter-dropdown",ref:f,onClick:function(){return u(!d)},onKeyDown:x,"aria-haspopup":"listbox","aria-expanded":d?"true":void 0,children:["All"===n?"Filter by ".concat(c):n,d?(0,t.jsx)(o.OvG,{"aria-hidden":"true"}):(0,t.jsx)(o.kc8,{"aria-hidden":"true"})]}),(0,t.jsx)("ul",{className:d?"filter__dropdown__box filter__dropdown__box--active":"filter__dropdown__box","aria-labelledby":"filter-dropdown",role:"listbox","aria-activedescendant":n,children:r.map((function(e){return(0,t.jsx)("li",{ref:e!==n?void 0:m,id:e,className:"filter__dropdown__box__option",onClick:h,onKeyDown:x,role:"option",tabIndex:-1,"aria-selected":e!==n?"false":"true",children:e},(0,l.Z)())}))})]})}function u(e){var r=e.items,n=e.onNoItem,i=e.children;return(0,t.jsxs)("section",{className:"card-grid",children:[!r||!r.length&&n,(null===r||void 0===r?void 0:r.length)&&i]})}var _=n(1664);var f=function(e){var r=e.country,n=r.flags,i=r.name,a=r.region,c=r.subregion,s=r.capital,l=r.cca3;return(0,t.jsxs)("article",{className:"card",children:[(0,t.jsx)("section",{className:"card__head",children:(0,t.jsx)(_.default,{href:{pathname:"/country/[alpha3code]",query:{alpha3code:l}},children:(0,t.jsx)("a",{children:(0,t.jsx)("picture",{className:"card__head__img",children:(0,t.jsx)("img",{loading:"lazy",src:n[0],alt:"".concat(i.common,"'s flag")})})})})}),(0,t.jsx)("section",{className:"card__body",children:(0,t.jsxs)("div",{className:"card__body__text",children:[(0,t.jsx)("h2",{children:(0,t.jsx)(_.default,{href:{pathname:"/country/[alpha3code]",query:{alpha3code:l}},children:(0,t.jsx)("a",{className:"heading-link",children:i.common})})}),(0,t.jsxs)("dl",{className:"desc-list",children:[(0,t.jsxs)("div",{className:"desc-list__item",children:[(0,t.jsx)("dt",{className:"desc-list__item__term",children:"Region:"}),(0,t.jsx)("dd",{className:"desc-list__item__detail",children:a})]}),(0,t.jsxs)("div",{className:"desc-list__item",children:[(0,t.jsx)("dt",{className:"desc-list__item__term",children:"Sub region:"}),(0,t.jsx)("dd",{className:"desc-list__item__detail",children:c})]}),(0,t.jsxs)("div",{className:"desc-list__item",children:[(0,t.jsx)("dt",{className:"desc-list__item__term",children:"Capital:"}),(0,t.jsx)("dd",{className:"desc-list__item__detail",children:s})]})]})]})})]})};function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return m(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=!0;function p(e){var r=e.countries,n=e.regions,c=(0,i.useState)(""),l=c[0],o=c[1],_=(0,i.useState)("All"),m=_[0],x=_[1],p=(0,i.useState)([]),v=p[0],j=p[1];return(0,i.useEffect)((function(){var e=h(r);l&&(e=r.filter((function(e){return new RegExp(l,"i").test(e.name.common)}))),"All"!==m&&(e=r.filter((function(e){return e.region===m}))),j(e)}),[r,l,m]),(0,t.jsxs)("main",{children:[(0,t.jsxs)("section",{className:"filters-section",children:[(0,t.jsx)(a.Pd.Provider,{value:{className:"search-box__icon"},children:(0,t.jsx)(s,{query:l,handleQuery:function(e){x("All"),o(e.target.value)},placeholder:"Search for a country..."})}),(0,t.jsx)(a.Pd.Provider,{value:{className:"filter__dropdown__icon"},children:(0,t.jsx)(d,{items:n,selectedItem:m,handleSelection:function(e){o(""),x(e)},criterion:"region"})})]}),(0,t.jsx)(u,{items:v,onNoItem:(0,t.jsx)("h2",{className:"card-grid__no-item-message",children:"Sorry, your search did not match any country :("}),children:v.map((function(e){return(0,t.jsx)(f,{country:e},e.cca3)}))})]})}}},function(e){e.O(0,[866,937,412,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);